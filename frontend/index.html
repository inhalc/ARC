
<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <title>Related Paper Agent</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>
      <div class="brand">
        <h1>Related Paper Agent</h1>
        <p>综合 OpenAlex 与 arXiv，快速发现相关论文并生成 Why Related / Difference 报告。</p>
      </div>
      <div class="actions">
        <div class="user-menu">
          <button id="user-toggle" type="button" class="user-button" aria-label="用户菜单">
            <div class="user-avatar-wrapper">
              <div class="user-avatar-img" id="current-user-avatar">CV</div>
              <div class="user-status-dot"></div>
            </div>
            <svg class="dropdown-icon" width="12" height="12" viewBox="0 0 12 12" fill="none">
              <path d="M2.5 4.5L6 8L9.5 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div id="user-dropdown" class="user-dropdown hidden">
            <div class="dropdown-header">
              <div class="dropdown-title">研究者账户</div>
              <div class="dropdown-subtitle">3 个账户 · 已同步</div>
            </div>
            <div class="user-list">
              <button class="user-card" data-user="cv">
                <div class="user-card-avatar cv-avatar">CV</div>
                <div class="user-card-info">
                  <div class="user-card-name">Dr. Chen</div>
                  <div class="user-card-role">计算机视觉研究员</div>
                  <div class="user-card-focus">
                    <span class="focus-tag">图像处理</span>
                    <span class="focus-tag">视觉识别</span>
                  </div>
                </div>
                <div class="user-card-check">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M13.3332 4L5.99984 11.3333L2.6665 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </button>
              <button class="user-card" data-user="nlp">
                <div class="user-card-avatar nlp-avatar">NLP</div>
                <div class="user-card-info">
                  <div class="user-card-name">Dr. Wang</div>
                  <div class="user-card-role">自然语言处理专家</div>
                  <div class="user-card-focus">
                    <span class="focus-tag">语言模型</span>
                    <span class="focus-tag">文本分析</span>
                  </div>
                </div>
                <div class="user-card-check">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M13.3332 4L5.99984 11.3333L2.6665 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </button>
              <button class="user-card" data-user="robot">
                <div class="user-card-avatar robot-avatar">EM</div>
                <div class="user-card-info">
                  <div class="user-card-name">Dr. Liu</div>
                  <div class="user-card-role">具身智能专家</div>
                  <div class="user-card-focus">
                    <span class="focus-tag">机器人</span>
                    <span class="focus-tag">自主系统</span>
                  </div>
                </div>
                <div class="user-card-check">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M13.3332 4L5.99984 11.3333L2.6665 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </div>
              </button>
            </div>
            <div class="dropdown-footer">
              <button class="manage-profiles-btn">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8 3.33334V12.6667M3.33337 8H12.6667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <span>添加或管理账户</span>
              </button>
              <button class="settings-btn">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M8 10C9.10457 10 10 9.10457 10 8C10 6.89543 9.10457 6 8 6C6.89543 6 6 6.89543 6 8C6 9.10457 6.89543 10 8 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M12.9333 10C12.8444 10.2016 12.8206 10.4253 12.8652 10.6409C12.9098 10.8565 13.0206 11.0534 13.1822 11.2044L13.2178 11.24C13.3499 11.372 13.4543 11.5284 13.5249 11.7004C13.5956 11.8724 13.6312 12.0567 13.6312 12.2427C13.6312 12.4288 13.5956 12.613 13.5249 12.785C13.4543 12.9571 13.3499 13.1134 13.2178 13.2454C13.0858 13.3775 12.9294 13.4819 12.7574 13.5526C12.5854 13.6232 12.4011 13.6588 12.2151 13.6588C12.029 13.6588 11.8448 13.6232 11.6728 13.5526C11.5007 13.4819 11.3444 13.3775 11.2124 13.2454L11.1768 13.2098C11.0258 13.0482 10.8289 12.9374 10.6133 12.8928C10.3977 12.8482 10.174 12.872 9.97245 12.9609C9.77423 13.046 9.60626 13.1898 9.49092 13.3728C9.37559 13.5559 9.31831 13.7698 9.32578 13.9858V14.0858C9.32578 14.4607 9.17697 14.8203 8.91192 15.0853C8.64687 15.3504 8.28726 15.4992 7.91245 15.4992C7.53763 15.4992 7.17802 15.3504 6.91297 15.0853C6.64792 14.8203 6.49912 14.4607 6.49912 14.0858V14.0329C6.48759 13.8086 6.41413 13.5924 6.28644 13.4084C6.15876 13.2244 5.98165 13.0797 5.77467 12.9898C5.57311 12.901 5.34938 12.8771 5.13379 12.9217C4.91821 12.9663 4.72131 13.0772 4.57023 13.2387L4.53467 13.2743C4.40263 13.4064 4.24628 13.5108 4.07426 13.5814C3.90225 13.6521 3.71798 13.6877 3.53201 13.6877C3.34603 13.6877 3.16176 13.6521 2.98975 13.5814C2.81773 13.5108 2.66138 13.4064 2.52934 13.2743C2.39724 13.1423 2.29283 12.9859 2.22218 12.8139C2.15154 12.6419 2.11594 12.4576 2.11594 12.2716C2.11594 12.0856 2.15154 11.9013 2.22218 11.7293C2.29283 11.5573 2.39724 11.4009 2.52934 11.2689L2.56489 11.2333C2.72651 11.0822 2.83734 10.8853 2.88192 10.6697C2.9265 10.4541 2.90268 10.2304 2.81378 10.0289C2.72861 9.83064 2.58478 9.66267 2.40173 9.54734C2.21869 9.432 2.00485 9.37472 1.78889 9.38219H1.68889C1.31408 9.38219 0.954466 9.23339 0.689418 8.96834C0.424369 8.70329 0.275562 8.34368 0.275562 7.96886C0.275562 7.59404 0.424369 7.23443 0.689418 6.96938C0.954466 6.70433 1.31408 6.55553 1.68889 6.55553H1.74178C1.96607 6.544 2.18229 6.47054 2.36629 6.34285C2.55028 6.21517 2.69496 6.03806 2.78489 5.83108C2.87379 5.62952 2.89761 5.40579 2.85303 5.1902C2.80845 4.97462 2.69762 4.77772 2.536 4.62664L2.50045 4.59108C2.36835 4.45904 2.26394 4.30269 2.19329 4.13067C2.12265 3.95866 2.08704 3.77439 2.08704 3.58841C2.08704 3.40244 2.12265 3.21817 2.19329 3.04615C2.26394 2.87414 2.36835 2.71779 2.50045 2.58575C2.63249 2.45365 2.78884 2.34924 2.96085 2.27859C3.13287 2.20795 3.31714 2.17234 3.50312 2.17234C3.68909 2.17234 3.87336 2.20795 4.04538 2.27859C4.21739 2.34924 4.37374 2.45365 4.50578 2.58575L4.54134 2.6213C4.69242 2.78293 4.88932 2.89376 5.10491 2.93834C5.32049 2.98291 5.54422 2.95909 5.74578 2.87019H5.77467C5.97289 2.78502 6.14086 2.64119 6.2562 2.45815C6.37153 2.2751 6.42881 2.06126 6.42134 1.8453V1.7453C6.42134 1.37049 6.57015 1.01088 6.8352 0.745829C7.10025 0.48078 7.45986 0.331974 7.83467 0.331974C8.20949 0.331974 8.5691 0.48078 8.83415 0.745829C9.0992 1.01088 9.24801 1.37049 9.24801 1.7453V1.79819C9.24048 2.01415 9.29776 2.22799 9.41309 2.41103C9.52843 2.59408 9.6964 2.73791 9.89467 2.82308C10.0962 2.91198 10.32 2.9358 10.5355 2.89122C10.7511 2.84664 10.948 2.73581 11.0991 2.57419L11.1347 2.53863C11.2667 2.40653 11.4231 2.30212 11.5951 2.23148C11.7671 2.16084 11.9514 2.12523 12.1373 2.12523C12.3233 2.12523 12.5076 2.16084 12.6796 2.23148C12.8516 2.30212 13.008 2.40653 13.14 2.53863C13.2721 2.67067 13.3765 2.82702 13.4472 2.99904C13.5178 3.17105 13.5534 3.35532 13.5534 3.5413C13.5534 3.72727 13.5178 3.91154 13.4472 4.08356C13.3765 4.25557 13.2721 4.41192 13.14 4.54397L13.1044 4.57952C12.9428 4.7306 12.832 4.92751 12.7874 5.14309C12.7428 5.35868 12.7666 5.58241 12.8555 5.78397V5.81286C12.9407 6.01108 13.0845 6.17905 13.2676 6.29438C13.4506 6.40972 13.6645 6.467 13.8804 6.45952H13.9804C14.3552 6.45952 14.7149 6.60833 14.9799 6.87338C15.245 7.13843 15.3938 7.49804 15.3938 7.87286C15.3938 8.24767 15.245 8.60728 14.9799 8.87233C14.7149 9.13738 14.3552 9.28619 13.9804 9.28619H13.9276C13.7116 9.27871 13.4978 9.33599 13.3147 9.45133C13.1317 9.56666 12.9878 9.73463 12.9027 9.93286V10.0009C12.8178 10.2024 12.794 10.4262 12.8386 10.6418C12.8832 10.8573 12.994 11.0542 13.1555 11.2053L13.1911 11.2409C13.3232 11.3729 13.4276 11.5293 13.4983 11.7013C13.5689 11.8733 13.6045 12.0576 13.6045 12.2435C13.6045 12.4295 13.5689 12.6138 13.4983 12.7858C13.4276 12.9578 13.3232 13.1142 13.1911 13.2462" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>账户设置</span>
              </button>
            </div>
          </div>
        </div>
        <button id="toggle-dark" type="button" aria-label="切换深浅色">☀️</button>
        <a class="repo" href="https://github.com/inhalc/ARC" target="_blank" rel="noreferrer">GitHub</a>
      </div>
    </header>

    <main>
      <section class="panel query-panel">
        <form id="search-form">
          <label for="query">检索关键词 / 主题（英文效果更好）</label>
          <input id="query" name="query" type="text" placeholder="例如：multimodal large language model" required />
          <div class="options">
            <fieldset>
              <legend>arXiv 分类（可多选）</legend>
              <label><input type="checkbox" name="category" value="cs.AI" /> cs.AI</label>
              <label><input type="checkbox" name="category" value="cs.CL" /> cs.CL</label>
              <label><input type="checkbox" name="category" value="cs.LG" /> cs.LG</label>
              <label><input type="checkbox" name="category" value="cs.CV" /> cs.CV</label>
              <label><input type="checkbox" name="category" value="cs.RO" /> cs.RO</label>
            </fieldset>
            <div class="toggles">
              <label>
                OpenAlex 数量
                <input type="number" name="openalex" min="0" max="200" value="60" />
              </label>
              <label>
                arXiv 数量
                <input type="number" name="arxiv" min="0" max="200" value="40" />
              </label>
              <label>
                返回上限
                <input type="number" name="top" min="1" max="100" value="20" />
              </label>
            </div>
          </div>
          <div class="button-row">
            <button type="submit">🚀 开始检索</button>
            <button type="reset" class="quiet">重置</button>
          </div>
        </form>
      </section>

      <section class="panel results-panel">
        <div class="results-header">
          <h2>检索结果</h2>
          <div class="download">
            <button id="download-md" type="button" disabled>导出 Markdown</button>
            <button id="download-csv" type="button" disabled>导出 CSV</button>
          </div>
        </div>

        <div id="progress-indicator" class="progress hidden">
          <div class="progress-bar">
            <div class="progress-fill"></div>
          </div>
          <ul class="progress-steps">
            <li data-step="openalex">
              <span class="step-icon">1</span>
              <span class="step-label">获取 OpenAlex</span>
            </li>
            <li data-step="arxiv">
              <span class="step-icon">2</span>
              <span class="step-label">获取 arXiv</span>
            </li>
            <li data-step="rank">
              <span class="step-icon">3</span>
              <span class="step-label">语义排序</span>
            </li>
            <li data-step="summary">
              <span class="step-icon">4</span>
              <span class="step-label">生成摘要</span>
            </li>
          </ul>
        </div>

        <div id="status" class="status">请输入关键词并开始检索。</div>
        <div id="results" class="results-list"></div>
      </section>
    </main>

    <template id="result-template">
      <article class="result-item">
        <header class="result-header">
          <div class="result-heading">
            <h3 class="title"></h3>
            <div class="meta"></div>
          </div>
          <a class="primary-link" target="_blank" rel="noreferrer">查看原文</a>
        </header>
        <div class="result-body">
          <section class="result-section summary-section">
            <h4><span class="badge badge-summary">摘要精炼</span></h4>
            <p class="summary"></p>
          </section>
          <section class="result-section why-section">
            <h4><span class="badge badge-why">Why Related</span></h4>
            <p class="why"></p>
          </section>
          <section class="result-section diff-section">
            <h4><span class="badge badge-diff">Difference</span></h4>
            <p class="difference"></p>
          </section>
        </div>
        <details class="abstract-panel">
          <summary>展开原始摘要</summary>
          <p class="abstract"></p>
        </details>
      </article>
    </template>

    <button id="back-to-top" type="button" aria-label="回到顶部">↑</button>

    <script src="config.js"></script>
    <script src="app.js" type="module"></script>
  </body>
</html>
